(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music"],{"01e1":function(t,e,n){"use strict";n("a645")},1276:function(t,e,n){"use strict";var i=n("2ba4"),a=n("c65b"),s=n("e330"),r=n("d784"),o=n("44e7"),c=n("825a"),l=n("1d80"),u=n("4840"),d=n("8aa5"),g=n("50c4"),v=n("577e"),f=n("dc4a"),p=n("4dae"),h=n("14c3"),m=n("9263"),k=n("9f7f"),_=n("d039"),b=k.UNSUPPORTED_Y,y=4294967295,x=Math.min,w=[].push,C=s(/./.exec),R=s(w),S=s("".slice),I=!_((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(t,e,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var s=v(l(this)),r=void 0===n?y:n>>>0;if(0===r)return[];if(void 0===t)return[s];if(!o(t))return a(e,s,t,r);var c,u,d,g=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,k=new RegExp(t.source,f+"g");while(c=a(m,k,s)){if(u=k.lastIndex,u>h&&(R(g,S(s,h,c.index)),c.length>1&&c.index<s.length&&i(w,g,p(c,1)),d=c[0].length,h=u,g.length>=r))break;k.lastIndex===c.index&&k.lastIndex++}return h===s.length?!d&&C(k,"")||R(g,""):R(g,S(s,h)),g.length>r?p(g,0,r):g}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:a(e,this,t,n)}:e,[function(e,n){var i=l(this),r=void 0==e?void 0:f(e,t);return r?a(r,e,i,n):a(s,v(i),e,n)},function(t,i){var a=c(this),r=v(t),o=n(s,a,r,i,s!==e);if(o.done)return o.value;var l=u(a,RegExp),f=a.unicode,p=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(b?"g":"y"),m=new l(b?"^(?:"+a.source+")":a,p),k=void 0===i?y:i>>>0;if(0===k)return[];if(0===r.length)return null===h(m,r)?[r]:[];var _=0,w=0,C=[];while(w<r.length){m.lastIndex=b?0:w;var I,Q=h(m,b?S(r,w):r);if(null===Q||(I=x(g(m.lastIndex+(b?w:0)),r.length))===_)w=d(r,w,f);else{if(R(C,S(r,_,w)),C.length===k)return C;for(var O=1;O<=Q.length-1;O++)if(R(C,Q[O]),C.length===k)return C;w=_=I}}return R(C,S(r,_)),C}]}),!I,b)},"44e7":function(t,e,n){var i=n("861d"),a=n("c6b6"),s=n("b622"),r=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},5125:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"music"},[n("div",{staticClass:"netease-list"},[t.debug?n("div",{staticClass:"logs"},[n("button",{on:{click:function(e){return t.getMyPlaylists()}}},[t._v("获取歌单")]),n("button",{on:{click:function(e){return t.getLoginStatus()}}},[t._v("获取状态信息")]),n("button",{on:{click:function(e){return t.clearCookie()}}},[t._v("登出")]),n("button",{on:{click:function(e){return t.loginWithQR()}}},[t._v("登录")]),n("p",[t._v("登陆状态: "+t._s(JSON.stringify(t.loginStatus,null,2)))]),n("p",[t._v("UID: "+t._s(t.uid))]),n("p",[t._v("Cookie: "+t._s(t.cookie))]),n("p",[t._v("登录信息: "+t._s(JSON.stringify(t.loginInfo,null,2)))]),n("p",[t._v("播放列表: "+t._s(JSON.stringify(t.playlists,null,2)))])]):t._e(),t.loading?n("div",{staticClass:"ne-loading"},[t._v("正在加载")]):t._e(),t.loginStatus||t.loading?t._e():n("div",{staticClass:"login"},[t.loginQRPermitted?n("div",{staticClass:"login-qr"},[n("span",{staticClass:"tip"},[t._v(t._s(t.message))]),n("img",{attrs:{src:t.loginQR,alt:"",srcset:""}}),"Success"===t.statusType?n("div",{staticClass:"error"},[t._v(" 未跳转? "),n("button",{on:{click:function(e){return t.permitQR()}}},[t._v("重新扫码")]),n("button",{on:{click:function(e){return t.getLoginStatus()}}},[t._v("刷新")])]):t._e(),"Failed"===t.statusType?n("div",{staticClass:"error"},[n("button",{on:{click:function(e){return t.permitQR()}}},[t._v("重新扫码")])]):t._e()]):n("div",{staticClass:"login-ask"},[n("button",{on:{click:function(e){return t.permitQR()}}},[t._v("点击登录网易云音乐")])])]),t.loginStatus&&!t.loading?n("div",{staticClass:"main-area"},[n("div",{staticClass:"scroll-area"},[n("div",{staticClass:"list favourite-songs"},[n("div",{staticClass:"list-header"},[n("span",[t._v(t._s(t.favourites.name))]),n("router-link",{attrs:{to:{name:"NetEase",query:{type:"song",songid:t.favourites.tracks[0].id,listid:t.favouriteListId}}}},[n("button",{},[t._v("播放")])]),n("router-link",{attrs:{to:{name:"NetEase",query:{type:"list",listid:t.favouriteListId}}}},[n("button",{},[t._v("详情")])])],1),t._l(t.favourites.tracks.slice(0,5),(function(e,i){return n("router-link",{key:i,staticClass:"list-item",attrs:{to:{name:"NetEase",query:{type:"song",songid:e.id,listid:t.favouriteListId}}}},[n("img",{staticClass:"cover",attrs:{src:e.al.picUrl,alt:"",srcset:""}}),n("div",{staticClass:"song-info"},[n("p",{staticClass:"title"},[t._v(t._s(e.name))]),n("p",{staticClass:"detail"},[t._l(e.ar,(function(i,a){return n("span",{key:a},[t._v(t._s(i.name)+t._s(a!=e.ar.length-1?", ":""))])})),t._v(" - "+t._s(e.al.name))],2)])])}))],2),n("div",{staticClass:"list playlists"},[n("div",{staticClass:"list-header"},[n("span",[t._v("歌单列表")]),n("router-link",{attrs:{to:{name:"NetEase",query:{type:"list_all"}}}},[n("button",{},[t._v("全部")])])],1),t._l(t.playlists.slice(1,7),(function(e,i){return n("router-link",{key:i,staticClass:"list-item",attrs:{to:{name:"NetEase",query:{type:"list",listid:e.id}}}},[n("img",{staticClass:"cover",attrs:{src:e.coverImgUrl,alt:"",srcset:""}}),n("p",[t._v(t._s(e.name))])])}))],2)]),n("div",{staticClass:"profile"},[n("img",{staticClass:"avatar",attrs:{src:t.loginInfo.profile.avatarUrl,alt:"",srcset:""}}),n("p",[t._v(t._s(t.loginInfo.profile.nickname))]),n("button",{on:{click:function(e){return t.clearCookie()}}},[t._v("登出")])])]):t._e()])])},a=[],s=n("1da1"),r=(n("99af"),n("ac1f"),n("1276"),n("d3b7"),n("159b"),n("96cf"),{name:"netease",components:{},data:function(){return{base_url:"https://musicapi.mercutio.club",songs:"",albums:"",loginQR:"",timer:"",key:"",loginStatus:!1,loginInfo:"",message:"登录",playlists:"",uid:"",cookie:"",loginQRPermitted:!1,successType:"",debug:!1,favouriteListId:"",favourites:"",loading:!0}},computed:{},watch:{cookie:function(t){localStorage.netEaseCookie=t},loginStatus:function(t){1==t&&status&&(this.getMyPlaylists(),this.getFavourites())}},methods:{clearCookie:function(){this.cookie="",localStorage.netEaseCookie="",this.loginInfo="",this.loginStatus=!1,this.uid="",this.playlists="",this.loginWithQR()},login:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLoginStatus();case 2:if(t.loginStatus=e.sent,!t.loginStatus){e.next=9;break}return t.loginQRPermitted=!0,e.next=7,t.getMyPlaylists();case 7:return e.next=9,t.getFavourites();case 9:t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()},permitQR:function(){this.successType="",this.loginQRPermitted=!0,this.loginWithQR()},loginWithQR:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Date.now(),e.next=3,t.$axios({url:"".concat(t.base_url,"/login/qr/key?timerstamp=").concat(Date.now()),withCredentials:!0});case 3:return i=e.sent,a=i.data.data.unikey,e.next=7,t.$axios({url:"".concat(t.base_url,"/login/qr/create?key=").concat(a,"&qrimg=true&timerstamp=").concat(Date.now()),withCredentials:!0});case 7:r=e.sent,t.message="请扫描二维码",t.loginQR=r.data.data.qrimg,n=setInterval(Object(s["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkStatus(a);case 2:if(i=e.sent,800===i.code&&(t.loginQR="",clearInterval(n),t.message="二维码已过期,请重新获取",t.statusType="Failed"),803!==i.code){e.next=18;break}return s=i.cookie.split(";;"),s.forEach((function(e){document.cookie=e,t.cookie=e})),t.key="",t.loginQR="",clearInterval(n),t.message="授权登录成功",t.statusType="Success",e.next=14,t.getLoginStatus();case 14:return e.next=16,t.getMyPlaylists();case 16:return e.next=18,t.getFavourites();case 18:case"end":return e.stop()}}),e)}))),3e3);case 11:case"end":return e.stop()}}),e)})))()},checkStatus:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$axios({method:"POST",url:"".concat(e.base_url,"/login/qr/check?key=").concat(t,"&timerstamp=").concat(Date.now()),withCredentials:!0});case 2:return i=n.sent,n.abrupt("return",i.data);case 4:case"end":return n.stop()}}),n)})))()},getLoginStatus:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios({method:"POST",url:"".concat(t.base_url,"/login/status"),data:{timerstamp:Date.now(),cookie:t.cookie},withCredentials:!0});case 2:if(n=e.sent,console.log(n),t.loginInfo=n.data.data,null===n.data.data.account){e.next=11;break}return t.loginStatus=!0,t.uid=n.data.data.account.id,e.abrupt("return",!0);case 11:return t.loginStatus=!1,e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))()},getMyPlaylists:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios({method:"POST",url:"".concat(t.base_url,"/user/playlist"),withCredentials:!0,data:{uid:t.loginInfo.account.id,timerstamp:Date.now(),cookie:t.cookie}});case 2:n=e.sent,t.playlists=n.data.playlist,t.favouriteListId=n.data.playlist[0].id;case 5:case"end":return e.stop()}}),e)})))()},getFavourites:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("歌单id",t.favouriteListId),e.next=3,t.$axios({url:"".concat(t.base_url,"/playlist/detail?id=").concat(t.favouriteListId,"&cookie=").concat(t.cookie),withCredentials:!0});case 3:n=e.sent,console.log("歌单详情",n.data),t.favourites=n.data.playlist;case 6:case"end":return e.stop()}}),e)})))()}},created:function(){},mounted:function(){this.cookie=localStorage.netEaseCookie,this.login()},beforeDestroy:function(){},deactivated:function(){},activated:function(){}}),o=r,c=(n("01e1"),n("2877")),l=Object(c["a"])(o,i,a,!1,null,"ecf85b64",null);e["default"]=l.exports},a645:function(t,e,n){}}]);
//# sourceMappingURL=music.c17b74f7.js.map