(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["navigation"],{"0c2d":function(t,s,e){"use strict";e("af19")},"380a":function(t,s,e){},"64c4":function(t,s,e){"use strict";e("380a")},"74ae":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:{navigation:!0,"common-page":!0,"mask-on":t.addWindowShow,"common-page-blurred":t.bgPrepared&&t.settings.useBlur}},[e("transition",{attrs:{name:"fade"}},[t.addWindowShow?e("div",{staticClass:"general-window-mask",on:{click:function(s){return s.target!==s.currentTarget?null:t.showAdd()}}},[e("div",{staticClass:"general-window"},[e("div",{staticClass:"header"},[e("span",{staticClass:"title"},[t._v("添加网址")])]),e("span",{staticClass:"tip"},[t._v("名称")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editing.title,expression:"editing.title"}],staticClass:"better-input",attrs:{type:"text",name:"title",id:"title",placeholder:"名称"},domProps:{value:t.editing.title},on:{input:function(s){s.target.composing||t.$set(t.editing,"title",s.target.value)}}}),e("span",{staticClass:"tip"},[t._v("URL")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editing.url,expression:"editing.url"}],staticClass:"better-input",attrs:{type:"text",name:"url",id:"url",placeholder:"URL"},domProps:{value:t.editing.url},on:{input:function(s){s.target.composing||t.$set(t.editing,"url",s.target.value)}}}),e("button",{staticClass:"submit-button ef-pudding",on:{click:function(s){return t.addNewFavor()}}},[t._v(" 提交 ")])])]):t._e()]),e("div",{staticClass:"list-header"},[e("span",{staticClass:"title"},[t._v("我的收藏")]),e("button",{staticClass:"icon-button",on:{click:function(s){return t.showModify()}}},[e("span",{class:{iconfont:!0,"icon-edit-2":!t.modifyShow,"icon-check":t.modifyShow}}),e("span",{staticClass:"tip"},[t._v(t._s(t.modifyShow?"完成":"编辑"))])])]),e("div",{staticClass:"nav-list"},[t._l(t.navs.favorites,(function(s,i){return e("a",{key:i,class:{"nav-item":!0,"ef-float":!0,"nav-item-blurred":t.bgPrepared&&t.settings.useBlur,"nav-item-wide":t.testSubsites(s.attributes)},attrs:{href:s.attributes.url,target:"_blank"}},[e("div",{class:{left:!0,"left-wide":t.testSubsites(s.attributes)}},[e("div",{staticClass:"top"},[e("div",{staticClass:"icon-area",style:"background-color: "+s.attributes.color},[e("img",{class:{icon:!0,"icon-no-padding":s.attributes.no_padding},attrs:{src:t.getIcon(s),alt:"",srcset:""}})]),e("transition",{attrs:{name:"fade"}},[t.modifyShow?e("div",{class:{"btn-modify":!0,"remove-favor":!0,"ef-pudding":!0,"icon-button":!0},on:{click:function(s){return s.preventDefault(),t.removeFavor(i)}}},[e("span",{staticClass:"iconfont icon-trash"})]):t._e()])],1),e("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})]),t.testSubsites(s.attributes)?e("div",{staticClass:"subsites-list"},t._l(s.attributes.subsites.data,(function(s,i){return e("a",{key:i,class:{"subsite-item":!0,"subsite-item-blurred":t.bgPrepared&&t.settings.useBlur},attrs:{href:s.attributes.url,target:"_blank"}},[e("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})])})),0):t._e()])})),e("transition",{attrs:{name:"fade"}},[t.modifyShow?e("div",{staticClass:"nav-item ef-float add-nav",on:{click:function(s){return t.showAdd()}}},[e("span",{staticClass:"iconfont icon-add"}),e("span",{staticClass:"tip"},[t._v("自定义")])]):t._e()])],2),t._l(t.navs.others,(function(s,i){return e("div",{key:i,staticClass:"nav-block"},[e("div",{staticClass:"list-header"},[e("span",{staticClass:"title",domProps:{textContent:t._s(s.attributes.name)}})]),null!=s.attributes.sites.data?e("div",{staticClass:"nav-list"},t._l(s.attributes.sites.data,(function(s,i){return e("a",{key:i,class:{"nav-item":!0,"ef-float":!0,"nav-item-blurred":t.bgPrepared&&t.settings.useBlur,"nav-item-wide":t.testSubsites(s.attributes)},attrs:{href:s.attributes.url,target:"_blank"}},[e("div",{class:{left:!0,"left-wide":t.testSubsites(s.attributes)}},[e("div",{staticClass:"top"},[e("div",{staticClass:"icon-area",style:"background-color: "+s.attributes.color},[e("img",{class:{icon:!0,"icon-no-padding":s.attributes.no_padding},attrs:{src:t.getIcon(s),alt:"",srcset:""}})]),e("transition",{attrs:{name:"fade"}},[t.modifyShow?e("div",{class:{"btn-modify":!0,"add-favor":!0,"ef-pudding":!0,"icon-button":!0},on:{click:function(e){return e.preventDefault(),t.addFavor(s)}}},[e("span",{staticClass:"iconfont icon-add"})]):t._e()])],1),e("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})]),t.testSubsites(s.attributes)?e("div",{staticClass:"subsites-list"},t._l(s.attributes.subsites.data,(function(s,i){return e("a",{key:i,class:{"subsite-item":!0,"subsite-item-blurred":t.bgPrepared&&t.settings.useBlur},attrs:{href:s.attributes.url,target:"_blank"}},[e("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})])})),0):t._e()])})),0):t._e()])}))],2)},a=[],n=(e("99af"),e("fb6a"),e("a434"),e("e9c4"),{name:"Navigation",components:{},data:function(){return{navs:{favorites:[{title:"加载中",color:"",icon:"",url:""}],others:[]},addWindowShow:!1,modifyShow:!1,editing:{title:"",color:"#ffffff",icon:"",url:"",subsites:{data:[]}}}},computed:{remoteNavs:function(){return this.$store.getters.getNavs},bgPrepared:function(){return this.$store.getters.getBgPrepared},settings:function(){return this.$store.getters.getSettings}},watch:{navs:function(){this.$store.commit("setNavs",this.navs)}},methods:{testSubsites:function(t){try{return void 0!==t.subsites.data[0]}catch(s){return console.info(s),!1}},addNewFavor:function(){var t={id:Date.now(),attributes:this.deepClone(this.editing)};console.log(t),this.navs.favorites.unshift(t),this.editing.title="",this.editing.url="",this.editing.icon="",this.editing.color="",this.addWindowShow=!1},showModify:function(){this.modifyShow?this.modifyShow=!1:this.modifyShow=!0},showAdd:function(){this.addWindowShow?this.addWindowShow=!1:this.addWindowShow=!0},getRemoteNavs:function(){var t=this;try{this.$api.get("/collections?populate[0]=sites&populate[1]=sites.icon&populate[2]=sites.subsites").then((function(s){t.navs.others=s.data.data}))}catch(s){console.log(s)}},getIcon:function(t){try{var s=t.attributes.icon.data.attributes.url;return"https://navapi.mercutio.club"+s}catch(a){var e='<svg width="140" height="140" xmlns="http://www.w3.org/2000/svg"><g><text font-family="MiSans,sans" font-weight="800" font-size="120" y="120" x="9" fill="'.concat("#ffffff"==t.attributes.color?"#000":"#fff",'">').concat(t.attributes.title.slice(0,1),"</text></g></svg>"),i="data:image/svg+xml,"+encodeURIComponent(e);return i}},addFavor:function(t){this.navs.favorites.unshift(t),this.updateNavs()},removeFavor:function(t){this.navs.favorites.splice(t,1),this.updateNavs()},updateNavs:function(){var t=this;setTimeout((function(){t.$store.commit("setNavs",t.navs)}),5)},deepClone:function(t){var s=JSON.stringify(t),e=JSON.parse(s);return e}},created:function(){},mounted:function(){this.navs=this.remoteNavs,this.getRemoteNavs()},beforeDestroy:function(){}}),o=n,r=(e("f158"),e("64c4"),e("0c2d"),e("2877")),c=Object(r["a"])(o,i,a,!1,null,"a764ba1a",null);s["default"]=c.exports},"92a9":function(t,s,e){},af19:function(t,s,e){},f158:function(t,s,e){"use strict";e("92a9")}}]);
//# sourceMappingURL=navigation.c1482b44.js.map