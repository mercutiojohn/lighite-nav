(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["navigation"],{"0a15":function(t,s,i){},"3acd":function(t,s,i){},4292:function(t,s,i){"use strict";i("0a15")},"443d":function(t,s,i){},"4ac0":function(t,s,i){"use strict";i("3acd")},"67a8":function(t,s,i){"use strict";i("443d")},"74ae":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{class:{navigation:!0,"common-page":!0,"mask-on":t.addWindowShow}},[i("transition",{attrs:{name:"fade"}},[t.addWindowShow?i("div",{staticClass:"general-window-mask",on:{click:function(s){return s.target!==s.currentTarget?null:t.showAdd()}}},[i("div",{staticClass:"general-window"},[i("div",{staticClass:"header"},[i("span",{staticClass:"title"},[t._v("添加网址")])]),i("span",{staticClass:"tip"},[t._v("名称")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editing.title,expression:"editing.title"}],staticClass:"better-input",attrs:{type:"text",name:"title",id:"title",placeholder:"名称"},domProps:{value:t.editing.title},on:{input:function(s){s.target.composing||t.$set(t.editing,"title",s.target.value)}}}),i("span",{staticClass:"tip"},[t._v("URL")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editing.url,expression:"editing.url"}],staticClass:"better-input",attrs:{type:"text",name:"url",id:"url",placeholder:"URL"},domProps:{value:t.editing.url},on:{input:function(s){s.target.composing||t.$set(t.editing,"url",s.target.value)}}}),i("button",{staticClass:"submit-button ef-pudding",on:{click:function(s){return t.addNewFavor()}}},[t._v("提交")])])]):t._e()]),i("div",{staticClass:"list-header"},[i("span",{staticClass:"title"},[t._v("我的收藏")]),i("button",{staticClass:"icon-button",on:{click:function(s){return t.showModify()}}},[i("span",{class:{iconfont:!0,"icon-edit-2":!t.modifyShow,"icon-check":t.modifyShow}}),i("span",{staticClass:"tip"},[t._v(t._s(t.modifyShow?"完成":"编辑"))])])]),i("div",{staticClass:"nav-list"},[t._l(t.navs.favorites,(function(s,e){return i("a",{key:e,class:{"nav-item":!0,"ef-float":!0,"nav-item-wide":t.testSubsites(s.attributes)},attrs:{href:s.attributes.url,target:"_blank"}},[i("div",{class:{left:!0,"left-wide":t.testSubsites(s.attributes)}},[i("div",{staticClass:"top"},[i("div",{staticClass:"icon-area",style:"background-color: "+s.attributes.color},[i("img",{class:{icon:!0,"icon-no-padding":s.attributes.no_padding},attrs:{src:t.getIcon(s),alt:"",srcset:""}})]),i("transition",{attrs:{name:"fade"}},[t.modifyShow?i("div",{class:{"btn-modify":!0,"remove-favor":!0,"ef-pudding":!0,"icon-button":!0},on:{click:function(s){return s.preventDefault(),t.removeFavor(e)}}},[i("span",{staticClass:"iconfont icon-trash"})]):t._e()])],1),i("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})]),t.testSubsites(s.attributes)?i("div",{staticClass:"subsites-list"},t._l(s.attributes.subsites.data,(function(s,e){return i("a",{key:e,staticClass:"subsite-item",attrs:{href:s.attributes.url,target:"_blank"}},[i("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})])})),0):t._e()])})),i("transition",{attrs:{name:"fade"}},[t.modifyShow?i("div",{staticClass:"nav-item ef-float add-nav",on:{click:function(s){return t.showAdd()}}},[i("span",{staticClass:"iconfont icon-add"}),i("span",{staticClass:"tip"},[t._v("自定义")])]):t._e()])],2),t._l(t.navs.others,(function(s,e){return i("div",{key:e,staticClass:"nav-block"},[i("div",{staticClass:"list-header"},[i("span",{staticClass:"title",domProps:{textContent:t._s(s.attributes.name)}})]),null!=s.attributes.sites.data?i("div",{staticClass:"nav-list"},t._l(s.attributes.sites.data,(function(s,e){return i("a",{key:e,class:{"nav-item":!0,"ef-float":!0,"nav-item-wide":t.testSubsites(s.attributes)},attrs:{href:s.attributes.url,target:"_blank"}},[i("div",{class:{left:!0,"left-wide":t.testSubsites(s.attributes)}},[i("div",{staticClass:"top"},[i("div",{staticClass:"icon-area",style:"background-color: "+s.attributes.color},[i("img",{class:{icon:!0,"icon-no-padding":s.attributes.no_padding},attrs:{src:t.getIcon(s),alt:"",srcset:""}})]),i("transition",{attrs:{name:"fade"}},[t.modifyShow?i("div",{class:{"btn-modify":!0,"add-favor":!0,"ef-pudding":!0,"icon-button":!0},on:{click:function(i){return i.preventDefault(),t.addFavor(s)}}},[i("span",{staticClass:"iconfont icon-add"})]):t._e()])],1),i("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})]),t.testSubsites(s.attributes)?i("div",{staticClass:"subsites-list"},t._l(s.attributes.subsites.data,(function(s,e){return i("a",{key:e,staticClass:"subsite-item",attrs:{href:s.attributes.url,target:"_blank"}},[i("span",{staticClass:"title fix-text-overflow",domProps:{textContent:t._s(s.attributes.title)}})])})),0):t._e()])})),0):t._e()])}))],2)},a=[],n=(i("99af"),i("fb6a"),i("a434"),i("e9c4"),{name:"Navigation",components:{},data:function(){return{navs:{favorites:[{title:"加载中",color:"",icon:"",url:""}],others:[]},addWindowShow:!1,modifyShow:!1,editing:{title:"",color:"#ffffff",icon:"",url:"",subsites:{data:[]}}}},computed:{remoteNavs:function(){return this.$store.getters.getNavs}},watch:{navs:function(){this.$store.commit("setNavs",this.navs)}},methods:{testSubsites:function(t){try{return void 0!==t.subsites.data[0]}catch(s){return console.log(s),!1}},addNewFavor:function(){var t={id:Date.now(),attributes:this.deepClone(this.editing)};console.log(t),this.navs.favorites.unshift(t),this.editing.title="",this.editing.url="",this.editing.icon="",this.editing.color="",this.addWindowShow=!1},showModify:function(){this.modifyShow?this.modifyShow=!1:this.modifyShow=!0},showAdd:function(){this.addWindowShow?this.addWindowShow=!1:this.addWindowShow=!0},getRemoteNavs:function(){var t=this;try{this.$api.get("/collections?populate[0]=sites&populate[1]=sites.icon&populate[2]=sites.subsites").then((function(s){t.navs.others=s.data.data}))}catch(s){console.log(s)}},getIcon:function(t){try{var s=t.attributes.icon.data.attributes.url;return"http://navapi.mercutio.club"+s}catch(a){var i='<svg width="140" height="140" xmlns="http://www.w3.org/2000/svg"><g><text font-family="MiSans,sans" font-weight="800" font-size="120" y="120" x="9" fill="'.concat("#ffffff"==t.attributes.color?"#000":"#fff",'">').concat(t.attributes.title.slice(0,1),"</text></g></svg>"),e="data:image/svg+xml,"+encodeURIComponent(i);return e}},addFavor:function(t){this.navs.favorites.unshift(t),this.updateNavs()},removeFavor:function(t){this.navs.favorites.splice(t,1),this.updateNavs()},updateNavs:function(){var t=this;setTimeout((function(){t.$store.commit("setNavs",t.navs)}),5)},deepClone:function(t){var s=JSON.stringify(t),i=JSON.parse(s);return i}},created:function(){},mounted:function(){this.navs=this.remoteNavs,this.getRemoteNavs()},beforeDestroy:function(){}}),o=n,r=(i("4ac0"),i("67a8"),i("4292"),i("2877")),c=Object(r["a"])(o,e,a,!1,null,"0cd96984",null);s["default"]=c.exports}}]);
//# sourceMappingURL=navigation.31d9d28e.js.map